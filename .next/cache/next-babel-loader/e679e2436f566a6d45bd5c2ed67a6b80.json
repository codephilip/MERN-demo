{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Object$values from \"@babel/runtime-corejs2/core-js/object/values\";\nvar _jsxFileName = \"C:\\\\Users\\\\phili\\\\Documents\\\\Coding\\\\MERN\\\\11.21.20MERN\\\\components\\\\Budget\\\\BudgetComponent2.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Form, Input, TextArea, Button, Image, Message, Header, Icon } from \"semantic-ui-react\";\nimport axios from \"axios\";\nimport baseUrl from \"../../utils/baseUrl\";\nimport catchErrors from \"../../utils/catchErrors\";\nconst INITIAL_PRODUCT = {\n  name: \"\",\n  price: \"\",\n  media: \"\",\n  description: \"\"\n};\n\nfunction BudgetComponent2() {\n  const [product, setProduct] = React.useState(INITIAL_PRODUCT);\n  const [mediaPreview, setMediaPreview] = React.useState(\"\");\n  const [success, setSuccess] = React.useState(false);\n  const [loading, setLoading] = React.useState(false);\n  const [disabled, setDisabled] = React.useState(true);\n  const [error, setError] = React.useState(\"\");\n  React.useEffect(() => {\n    const isProduct = _Object$values(product).every(el => Boolean(el));\n\n    isProduct ? setDisabled(false) : setDisabled(true);\n  }, [product]);\n\n  function handleChange(event) {\n    const {\n      name,\n      value,\n      files\n    } = event.target;\n\n    if (name === \"media\") {\n      setProduct(prevState => _objectSpread({}, prevState, {\n        media: files[0]\n      }));\n      setMediaPreview(window.URL.createObjectURL(files[0]));\n    } else {\n      setProduct(prevState => _objectSpread({}, prevState, {\n        [name]: value\n      }));\n    }\n  }\n\n  async function handleImageUpload() {\n    const data = new FormData();\n    data.append(\"file\", product.media);\n    data.append(\"upload_preset\", \"reactreserve\");\n    data.append(\"cloud_name\", \"dbx0fy8zz\");\n    const response = await axios.post(process.env.CLOUDINARY_URL, data);\n    const mediaUrl = response.data.url;\n    return mediaUrl;\n  }\n\n  async function handleSubmit(event) {\n    try {\n      event.preventDefault();\n      console.log(product);\n      setLoading(true);\n      setError(\"\"); // const mediaUrl = await handleImageUpload();\n      // const url = `${baseUrl}/api/product`;\n      // const { name, price, description } = product;\n      // const payload = { name, price, description, mediaUrl };\n      // const response = await axios.post(url, payload);\n      // console.log({ response });\n      // setProduct(INITIAL_PRODUCT);\n      // setSuccess(true);\n    } catch (error) {\n      catchErrors(error, setError);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Header, {\n    as: \"h2\",\n    block: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, __jsx(Icon, {\n    name: \"add\",\n    color: \"orange\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), \"Create New Product\"), __jsx(Form, {\n    loading: loading,\n    error: Boolean(error),\n    success: success,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(Message, {\n    error: true,\n    header: \"Oops!\",\n    content: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }), __jsx(Message, {\n    success: true,\n    icon: \"check\",\n    header: \"Success!\",\n    content: \"Your product has been posted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), __jsx(Form.Group, {\n    widths: \"equal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, __jsx(Form.Field, {\n    control: Input,\n    name: \"name\",\n    label: \"Name\",\n    placeholder: \"Name\",\n    value: product.name,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), __jsx(Form.Field, {\n    control: Input,\n    name: \"price\",\n    label: \"Price\",\n    placeholder: \"Price\",\n    min: \"0.00\",\n    step: \"0.01\",\n    type: \"number\",\n    value: product.price,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), __jsx(Form.Field, {\n    control: Input,\n    name: \"media\",\n    type: \"file\",\n    label: \"Media\",\n    accept: \"image/*\",\n    content: \"Select Image\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  })), __jsx(Image, {\n    src: mediaPreview,\n    rounded: true,\n    centered: true,\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }), __jsx(Form.Field, {\n    control: TextArea,\n    name: \"description\",\n    label: \"Description\",\n    placeholder: \"Description\",\n    onChange: handleChange,\n    value: product.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }), __jsx(Form.Field, {\n    control: Button,\n    disabled: disabled || loading,\n    color: \"blue\",\n    icon: \"pencil alternate\",\n    content: \"Submit\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  })));\n}\n\nexport default BudgetComponent2;","map":{"version":3,"sources":["C:\\Users\\phili\\Documents\\Coding\\MERN\\11.21.20MERN\\components\\Budget\\BudgetComponent2.js"],"names":["React","Form","Input","TextArea","Button","Image","Message","Header","Icon","axios","baseUrl","catchErrors","INITIAL_PRODUCT","name","price","media","description","BudgetComponent2","product","setProduct","useState","mediaPreview","setMediaPreview","success","setSuccess","loading","setLoading","disabled","setDisabled","error","setError","useEffect","isProduct","every","el","Boolean","handleChange","event","value","files","target","prevState","window","URL","createObjectURL","handleImageUpload","data","FormData","append","response","post","process","env","CLOUDINARY_URL","mediaUrl","url","handleSubmit","preventDefault","console","log"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  Form,\r\n  Input,\r\n  TextArea,\r\n  Button,\r\n  Image,\r\n  Message,\r\n  Header,\r\n  Icon\r\n} from \"semantic-ui-react\";\r\nimport axios from \"axios\";\r\nimport baseUrl from \"../../utils/baseUrl\";\r\nimport catchErrors from \"../../utils/catchErrors\";\r\n\r\nconst INITIAL_PRODUCT = {\r\n  name: \"\",\r\n  price: \"\",\r\n  media: \"\",\r\n  description: \"\"\r\n};\r\n\r\nfunction BudgetComponent2() {\r\n  const [product, setProduct] = React.useState(INITIAL_PRODUCT);\r\n  const [mediaPreview, setMediaPreview] = React.useState(\"\");\r\n  const [success, setSuccess] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [disabled, setDisabled] = React.useState(true);\r\n  const [error, setError] = React.useState(\"\");\r\n\r\n  React.useEffect(() => {\r\n    const isProduct = Object.values(product).every(el => Boolean(el));\r\n    isProduct ? setDisabled(false) : setDisabled(true);\r\n  }, [product]);\r\n\r\n  function handleChange(event) {\r\n    const { name, value, files } = event.target;\r\n    if (name === \"media\") {\r\n      setProduct(prevState => ({ ...prevState, media: files[0] }));\r\n      setMediaPreview(window.URL.createObjectURL(files[0]));\r\n    } else {\r\n      setProduct(prevState => ({ ...prevState, [name]: value }));\r\n    }\r\n  }\r\n\r\n  async function handleImageUpload() {\r\n    const data = new FormData();\r\n    data.append(\"file\", product.media);\r\n    data.append(\"upload_preset\", \"reactreserve\");\r\n    data.append(\"cloud_name\", \"dbx0fy8zz\");\r\n    const response = await axios.post(process.env.CLOUDINARY_URL, data);\r\n    const mediaUrl = response.data.url;\r\n    return mediaUrl;\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    try {\r\n      event.preventDefault();\r\n      console.log(product);\r\n      setLoading(true);\r\n      setError(\"\");\r\n      // const mediaUrl = await handleImageUpload();\r\n      // const url = `${baseUrl}/api/product`;\r\n      // const { name, price, description } = product;\r\n      // const payload = { name, price, description, mediaUrl };\r\n      // const response = await axios.post(url, payload);\r\n      // console.log({ response });\r\n      // setProduct(INITIAL_PRODUCT);\r\n      // setSuccess(true);\r\n    } catch (error) {\r\n      catchErrors(error, setError);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Header as=\"h2\" block>\r\n        <Icon name=\"add\" color=\"orange\" />\r\n        Create New Product\r\n      </Header>\r\n      <Form\r\n        loading={loading}\r\n        error={Boolean(error)}\r\n        success={success}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <Message error header=\"Oops!\" content={error} />\r\n        <Message\r\n          success\r\n          icon=\"check\"\r\n          header=\"Success!\"\r\n          content=\"Your product has been posted\"\r\n        />\r\n        <Form.Group widths=\"equal\">\r\n          <Form.Field\r\n            control={Input}\r\n            name=\"name\"\r\n            label=\"Name\"\r\n            placeholder=\"Name\"\r\n            value={product.name}\r\n            onChange={handleChange}\r\n          />\r\n          <Form.Field\r\n            control={Input}\r\n            name=\"price\"\r\n            label=\"Price\"\r\n            placeholder=\"Price\"\r\n            min=\"0.00\"\r\n            step=\"0.01\"\r\n            type=\"number\"\r\n            value={product.price}\r\n            onChange={handleChange}\r\n          />\r\n          <Form.Field\r\n            control={Input}\r\n            name=\"media\"\r\n            type=\"file\"\r\n            label=\"Media\"\r\n            accept=\"image/*\"\r\n            content=\"Select Image\"\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Group>\r\n        <Image src={mediaPreview} rounded centered size=\"small\" />\r\n        <Form.Field\r\n          control={TextArea}\r\n          name=\"description\"\r\n          label=\"Description\"\r\n          placeholder=\"Description\"\r\n          onChange={handleChange}\r\n          value={product.description}\r\n        />\r\n        <Form.Field\r\n          control={Button}\r\n          disabled={disabled || loading}\r\n          color=\"blue\"\r\n          icon=\"pencil alternate\"\r\n          content=\"Submit\"\r\n          type=\"submit\"\r\n        />\r\n      </Form>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default BudgetComponent2;\r\n"]},"metadata":{},"sourceType":"module"}